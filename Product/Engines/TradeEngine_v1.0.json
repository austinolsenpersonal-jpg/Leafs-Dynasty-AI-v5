{
  "version": "1.0",
  "module": "Engines.Trade",
  "name": "Leafs Dynasty Trade Engine",
  "description": "Hybrid trade engine for NHL 25 Leafs Dynasty. Balances realistic NHL-style behaviour with the ability to make smart, aggressive moves when the user requests it. Designed for use by the Leafs Dynasty AI GPT, with Architect GPT as the canon/validation layer.",
  "environment": {
    "game": "NHL 25",
    "mode": "Franchise",
    "team": "Toronto Maple Leafs",
    "platform": "Xbox Cloud (Series X|S build)"
  },
  "modes": {
    "default_mode": "hybrid",
    "profiles": {
      "realistic_nhl": {
        "description": "Prioritizes realism. Protects high picks and key prospects, avoids obviously lopsided trades, and respects cap and roster construction.",
        "aggressiveness": 0.3,
        "pick_safety": 0.9,
        "prospect_safety": 0.9,
        "rental_tolerance": 0.3
      },
      "hybrid": {
        "description": "Balanced between realism and win-now. Allows bigger swings if they make sense for the window, but still respects long-term health.",
        "aggressiveness": 0.6,
        "pick_safety": 0.7,
        "prospect_safety": 0.7,
        "rental_tolerance": 0.6
      },
      "win_now": {
        "description": "Cup-window mode. Will consider big overpays for high-impact players if the user confirms. Still avoids completely absurd trades.",
        "aggressiveness": 0.9,
        "pick_safety": 0.4,
        "prospect_safety": 0.4,
        "rental_tolerance": 0.9
      }
    }
  },
  "constraints": {
    "respect_salary_cap": true,
    "respect_contract_limits": true,
    "respect_roster_limits": true,
    "max_retained_salaries": 2,
    "min_cap_buffer_millions": 0.5,
    "min_deadline_cap_buffer_millions": 1.0,
    "protect_first_round_picks": true,
    "protect_second_round_picks": true,
    "allow_pick_move_override": true,
    "notes": [
      "Cap buffer rules are aligned with LeafsDynasty_MasterBootstrap_v2.0.",
      "Protect 1st and 2nd round picks by default unless the user explicitly approves a Win-Now style deal."
    ]
  },
  "external_factors": {
    "easy_trade_slider": {
      "description": "Reflects the in-game Easy Trade slider. The GPT should assume the slider makes trades easier or harder to complete, but still follow internal fairness logic.",
      "scale": "0-10",
      "default_value": 5
    },
    "morale_consideration": {
      "enabled": true,
      "description": "Avoids blowing up team morale with too many major trades in a short time window."
    }
  },
  "valuation_model": {
    "description": "Core logic for valuing players, picks, and contracts. Used to compare trade sides and produce a fair-deal band.",
    "inputs": [
      "overall_rating",
      "age",
      "potential_band",
      "position",
      "handedness",
      "role_archetype",
      "contract_aav",
      "contract_term_years",
      "years_remaining",
      "clause_type",
      "production_tier",
      "defensive_impact_tier",
      "special_teams_value",
      "chemistry_tag",
      "injury_risk_tier",
      "marketability_tier"
    ],
    "weights": {
      "overall_rating": 1.0,
      "age": 0.8,
      "potential_band": 0.9,
      "position": 0.6,
      "role_archetype": 0.6,
      "contract_aav": 0.8,
      "contract_term_years": 0.5,
      "years_remaining": 0.6,
      "clause_type": 0.4,
      "production_tier": 0.8,
      "defensive_impact_tier": 0.7,
      "special_teams_value": 0.5,
      "chemistry_tag": 0.4,
      "injury_risk_tier": 0.5,
      "marketability_tier": 0.2
    },
    "bands": {
      "elite_core": {
        "description": "Franchise pieces or core stars. Very high trade value and rarely moved.",
        "min_score": 90
      },
      "top_six_top_four": {
        "description": "Top-six forwards or top-four defensemen with strong contracts.",
        "min_score": 80,
        "max_score": 89
      },
      "middle_six_4_5_d": {
        "description": "Useful middle-six forwards or 4/5 defensemen.",
        "min_score": 70,
        "max_score": 79
      },
      "depth": {
        "description": "Bottom-six forwards, depth D, fringe roster players.",
        "min_score": 55,
        "max_score": 69
      },
      "replacement": {
        "description": "AHL depth, extra skaters, low-leverage pieces.",
        "max_score": 54
      }
    },
    "pick_value_map": {
      "round_1": {
        "base_value": 95,
        "deadline_inflation": 1.2
      },
      "round_2": {
        "base_value": 85,
        "deadline_inflation": 1.15
      },
      "round_3": {
        "base_value": 75,
        "deadline_inflation": 1.1
      },
      "round_4": {
        "base_value": 65,
        "deadline_inflation": 1.05
      },
      "round_5": {
        "base_value": 55,
        "deadline_inflation": 1.0
      },
      "round_6": {
        "base_value": 50,
        "deadline_inflation": 0.95
      },
      "round_7": {
        "base_value": 45,
        "deadline_inflation": 0.9
      }
    },
    "fairness_band": {
      "description": "How close the value of each side should be to be considered a fair trade.",
      "acceptable_delta_percent": 12,
      "yellow_zone_percent": 20,
      "red_zone_percent": 30
    }
  },
  "leafs_specific_rules": {
    "core_protection": {
      "description": "Which types of players should not be moved without explicit user confirmation.",
      "protect_categories": [
        "elite_core",
        "franchise_goalie"
      ]
    },
    "prospect_policy": {
      "description": "How to treat prospects in trade talks.",
      "default": "keep",
      "exceptions": [
        "If prospect is blocked long-term and the return is top_six_top_four or better.",
        "If user explicitly requests aggressive move in Win-Now mode."
      ]
    },
    "pick_policy": {
      "description": "How to treat draft picks.",
      "protect_rounds": [1, 2],
      "allow_rounds": [3, 4, 5, 6, 7],
      "notes": [
        "Round 1 and 2 are only tradeable with explicit user approval or in Win-Now mode.",
        "Later picks can be used as sweeteners in Hybrid mode."
      ]
    }
  },
  "offer_templates": {
    "simple_depth_swap": {
      "description": "Depth roster player for depth roster player, same position or role.",
      "use_cases": [
        "Improve handedness balance.",
        "Swap for better fit on bottom six or bottom pair.",
        "Low-risk chemistry tweaks."
      ]
    },
    "upgrade_with_pick": {
      "description": "Leafs send a depth player plus later pick to upgrade to a more impactful roster piece.",
      "use_cases": [
        "Improve third line scoring.",
        "Upgrade a 5/6 D to a stronger 4/5 D."
      ]
    },
    "prospect_for_roster": {
      "description": "Prospect or pick moved for established roster player in Win-Now or Hybrid modes.",
      "conditions": [
        "Cup window identified.",
        "Player acquired fills a clear top-six or top-four need.",
        "Cap and contract term acceptable."
      ]
    },
    "cap_rebalance": {
      "description": "Moves used to clean up bad contracts or free cap space.",
      "conditions": [
        "Used carefully in Realistic or Hybrid mode.",
        "Avoid unrealistic dumps unless Easy Trade slider is high and user understands context."
      ]
    }
  },
  "io_behaviour": {
    "evaluate_command": {
      "name": "/trade_eval",
      "description": "Given a trade idea described by the user, compute value for each side, cap impact, and classify as fair / slight overpay / heavy overpay."
    },
    "outlook_command": {
      "name": "/trade_outlook",
      "description": "Summarizes current team needs, assets, and recommended target types (not specific players unless the user wants)."
    },
    "path_respect": {
      "description": "The engine should always respect repo wiring from RuntimeConfig and Bootstrap.",
      "runtime_config_file": "Product/Dynasty/RuntimeConfig_v1.0.json",
      "bootstrap_file": "Product/Config/LeafsDynasty_MasterBootstrap_v2.0.json"
    }
  },
  "defaults": {
    "active_mode": "hybrid",
    "max_major_trades_per_season": 3,
    "max_minor_trades_per_season": 7,
    "deadline_risk_multiplier": 1.15,
    "offseason_risk_multiplier": 1.0
  },
  "notes": [
    "This engine is designed for Leafs Dynasty AI GM and hybrid modes.",
    "Architect GPT should NOT change this fileâ€™s intent without user confirmation.",
    "Dynasty GPT should always explain whether a trade is: Conservative, Hybrid, or Aggressive relative to the current mode.",
    "Dynasty GPT should never propose trades that violate NHL 25 roster/cap rules.",
    "If required inputs (overall, age, cap hit, etc.) are missing, the GPT must ask the user rather than guess."
  ]
}